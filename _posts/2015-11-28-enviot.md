---
layout: post
title:  "Environmental IoT Device"
date:   2015-11-28 13:30:21
categories: electronics
---
I've been interested in electronics and small useful devices for most of my life. Especially when I was a kid I thought the prospect of owning a device that did everything was silly so I prefferd buying something that had one function. The reasoning was that no one would make a device that did one thing badly. Obviously that was flawed. Today I'm still very interested in those small one use devices and modularity. In an attempt to better understand how IoT devices are made and how they connect to the world I've taken a pretty common concept and will be building it from modular electronics to create my very first IoT device.

![IoT Trend]({{cadamei.net}}/media/images/201511_enviot/iot_trend.PNG)

As the Queensland summer rolls in "How's the weather?" small talk picks up and responses generally consist of something to the effect of "Bloody hot mate". I want to answer the question literally. "It's currently 32 degrees celsius and 90% humidity". Determined by looking at my phone that is connected to the local wireless and pulling environmental statistics from my Internet of Things device.

To build this device I want to know the following:

* GPS accurate time
* Temperature
* Humidity
* Barometric pressure

All in a self contained enclosure accessible over a wireless network.

Regarding it's functionality I wanted it to be built to the following priorities:

1. Precision
2. Reliability
3. Efficiency
4. Smallest size

I used a local electronics distributor called [Little Bird Electronics](http://littlebirdelectronics.com) and purchased the following parts:

* Adafruit CC3000 WiFi Breakout
* SMA to uFL/u.FL/IPX/IPEX RF Adapter Cable
* SparkFun Barometric Pressure Sensor Breakout - BMP180
* Digital Temperature & humidity sensor (With Stainless Steel Probe)
* Antenna GPS 3V Magnetic Mount SMA
* Adafruit Ultimate GPS Breakout - 66 channel w/10 Hz updates [Version 3]

Prototyping will be completed on a breadboard and designed using [Fritzing](http://fritzing.org/).

I will need to test and verify each of the sensors is working independently.

Temperature and Humidity
===
Since it's quite humid right now I'll begin with the temperature and humidity sensor show below.

![Temperature and Humidity Sensor]({{cadamei.net}}/media/images/201511_enviot/2015-11-28 12.36.35_1024.jpg)

Using the example code and library supplied by dfrobot [here](http://www.dfrobot.com/wiki/index.php/Digital_Temperature_and_Humidity_sensor_(With_Stainless_Steel_Probe)_(SKU:SEN0148))

{% highlight c++ %}
//Arduino Sample Code for SHT1x Humidity and Temperature Sensor
//www.DFRobot.com
//Version 1.0

#include <SHT1x.h>

// Specify data and clock connections and instantiate SHT1x object
#define dataPin  10
#define clockPin 11
SHT1x sht1x(dataPin, clockPin);

void setup()
{
   Serial.begin(38400); // Open serial connection to report values to host
   Serial.println("Starting up");
}

void loop()
{
  float temp_c;
  float temp_f;
  float humidity;

  // Read values from the sensor
  temp_c = sht1x.readTemperatureC();
  temp_f = sht1x.readTemperatureF();
  humidity = sht1x.readHumidity();

  // Print the values to the serial port
  Serial.print("Temperature: ");
  Serial.print(temp_c, DEC);
  Serial.print("C / ");
  Serial.print(temp_f, DEC);
  Serial.print("F. Humidity: ");
  Serial.print(humidity);
  Serial.println("%");

  delay(2000);
}

{% endhighlight %}

I placed the inputs as shown here:

![SHT Wiring]({{ site.url }}/media/images/201511_enviot/Temperature_and_humidity_sensor_(FIT0320).png)

I obtained the following output:

>Temperature: 29.6800003051C / 85.4959945678F. Humidity: 70.99%    
Temperature: 29.6599960327C / 85.5139923095F. Humidity: 70.96%    
Temperature: 29.6800003051C / 85.5139923095F. Humidity: 70.96%    
Temperature: 29.6800003051C / 85.4959945678F. Humidity: 70.96%    
Temperature: 29.6800003051C / 85.4959945678F. Humidity: 70.89%    
Temperature: 29.6699981689C / 85.4959945678F. Humidity: 70.86%    
Temperature: 29.6699981689C / 85.4959945678F. Humidity: 70.83%    
Temperature: 29.6599960327C / 85.4959945678F. Humidity: 70.83%    
Temperature: 29.6599960327C / 85.4959945678F. Humidity: 70.89%    
Temperature: 29.6699981689C / 85.4779968261F. Humidity: 71.08%

So as we can see here it's not *that* humid.
